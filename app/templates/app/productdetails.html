{% extends 'app/baseindex.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}Product Details{% endblock title %}


{% block main-content %}
<style>
    .button-style {
        /* Add your desired styles here */
        display: inline-block;
        padding: 10px 20px; /* Adjust padding as needed */
        font-size: 16px; /* Adjust font size as needed */
        background-color: #007bff; /* Change to your preferred background color */
        color: #fff; /* Change to your preferred text color */
        text-decoration: none; /* Remove underline for links */
        border: none;
        cursor: pointer;
    }

</style>>


		<!-- BREADCRUMB -->


		<div id="breadcrumb" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<ul class="breadcrumb-tree">
							<li><a href="#">Home</a></li>
							<li><a href="#">All Categories</a></li>
							<li><a href="#">Accessories</a></li>
							<li><a href="#">Headphones</a></li>
							<li class="active">{{product.title}}</li>
						</ul>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /BREADCRUMB -->

		<!-- SECTION -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<!-- Product main img -->
						<div class="col-md-4 col-md-push-2">
							<div id="product-main-img">

								<img src="{% if product.images.all %}{{ product.images.first.image.url }}{% endif %}" alt="" id="main-product-img">

							</div>
						</div>

						<!-- Product thumb imgs -->
						<div class="col-md-2 col-md-pull-5">
							<div id="product-imgs">
								{% if product.images.all %}
								<div class="product-preview">
									{% for image in product.images.all %}
									<img src="{{ image.image.url }}" alt="" class="thumb-image" data-large-image="{{ image.image.url }}" onclick="changeMainImage('{{ image.image.url }}')">
									{% endfor %}
								</div>
								{% endif %}
							</div>
						</div>
						<!-- /Product thumb imgs -->



					<!-- Product details -->
					<div class="col-md-6">
						<div class="product-details">
							<h2 class="product-name">{{product.title}}</h2>
							<div>
								<div class="product-rating">
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star-o"></i>
								</div>
								<a class="review-link" href="#tab3">{{ total_review_count }} Review(s) | Add your review</a>
							</div>
							<div>
								<h3 class="product-price">Rs.{{product.discount_price}} <del class="product-old-price">Rs.{{product.selling_price}}</del></h3>
								<span class="product-available">In Stock</span>
							</div>
							<p>{{product.description}}</p>


							<div class="add-to-cart">
<!--								<div class="qty-label">-->
<!--									Qty-->
<!--									<div class="input-number">-->
<!--										<input type="number" id="product-quantity" min="1" value="1">-->
<!--										<span class="qty-up">+</span>-->
<!--										<span class="qty-down">-</span>-->
<!--									</div>-->
<!--								</div>-->
<!--								<form method="post" action="{% url 'add_to_cart' product.id %}">-->
<!--									{% csrf_token %}-->
<!--									<input type="hidden" value="{{product.id}}" class="product-id" name="" id="">-->
<!--									<input type="hidden" value="{{product.title}}" class="product-title" name="" id="">-->

<!--&lt;!&ndash;									<input type="hidden" name="quantity" id="selected-quantity"  >&ndash;&gt;-->
<!--									<button type="submit" class="add-to-cart-btn" id="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> Add to Cart</button>-->
<!--									<button type="submit" formaction="{% url 'buy_now' product.id %}" class="add-to-cart-btn"><i class="fa fa-bolt"></i> Buy Now</button>-->
<!--								</form>-->

											{% if product.is_available %}
												{% if product|is_in_cart:request.user %}
													<form method="post" action="{% url 'cart' %}">
														{% csrf_token %}
														<div class="add-to-cart">
														<button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> Go to Cart</button>
														<button type="submit" formaction="{% url 'buy_now' product.id %}" class="add-to-cart-btn"><i class="fa fa-bolt"></i> Buy Now</button>
														</div>
													</form>

												{% else %}
													<form method="post" action="{% url 'add_to_cart' product.id %}">
														{% csrf_token %}
														<div class="add-to-cart">
															<input type="hidden" name="next" value="{{ request.get_full_path }}">
															<button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
															<button type="submit" formaction="{% url 'buy_now' product.id %}" class="add-to-cart-btn"><i class="fa fa-bolt"></i> Buy Now</button>
														</div>
													</form>
												{% endif %}
											{% else %}
											<h4 class="text-danger"><span>Out of Stock</span></h4>
											{% endif %}


							</div>


							<ul class="product-btns">

								<li>
									<form method="POST" action="{% url 'toggle_wishlist' product.id %}">
										{% csrf_token %}
										<input type="hidden" name="next" value="{{ request.get_full_path }}">
										<a href="#" onclick="this.closest('form').submit(); return false;">
											<i class="fa fa-heart {% if product.id in user_wishlist %}red-heart{% else %}black-heart{% endif %}"></i>
											{% if product.id in user_wishlist %}
												Added to your Wishlist
											{% else %}
												Add to Wishlist
											{% endif %}
										</a>
									</form>
								</li>

								<li><a href="#"><i class="fa fa-exchange"></i> add to compare</a></li>
							</ul>

							<ul class="product-links">
								<li>Category:</li>
								<li><a href="#">{{ product.category }}</a></li>
								<li><a href="#">{{ product.brand }}</a></li>
							</ul>

							<ul class="product-links">
								<li>Share:</li>
								<li><a href="#"><i class="fa fa-facebook"></i></a></li>
								<li><a href="#"><i class="fa fa-twitter"></i></a></li>
								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
								<li><a href="#"><i class="fa fa-envelope"></i></a></li>
							</ul>

						</div>
					</div>
					<!-- /Product details -->

					<!-- Product tab -->
					<div class="col-md-12">
						<div id="product-tab">
							<!-- product tab nav -->
							<ul class="tab-nav">
								<li class="active"><a data-toggle="tab" href="#tab1">Description</a></li>
								<li><a data-toggle="tab" href="#tab2">Details</a></li>
								<li><a data-toggle="tab" href="#tab3">Reviews ({{ total_review_count }})</a></li>
							</ul>
							<!-- /product tab nav -->

							<!-- product tab content -->
							<div class="tab-content">
								<!-- tab1  -->
								<div id="tab1" class="tab-pane fade in active">
									<div class="row">
										<div class="col-md-12">
											<p>{{product.description}}</p>
										</div>
									</div>
								</div>
								<!-- /tab1  -->

								<!-- tab2  -->
								<div id="tab2" class="tab-pane fade in">
									<div class="row">
										<div class="col-md-12">
											<p>{{product.details}}</p>
										</div>
									</div>
								</div>
								<!-- /tab2  -->

								<!-- tab3  -->
								<div id="tab3" class="tab-pane fade in">
									<div class="row">
										<!-- Rating -->
										<div class="col-md-3">
											<div id="rating">
												<div class="rating-avg">
													<span>4.5</span>
													<div class="rating-stars">
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star-o"></i>
													</div>
												</div>
												<ul class="rating">
													<li>
														<div class="rating-stars">
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
														</div>
														<div class="rating-progress">
															<div style="width: 80%;"></div>
														</div>
														<span class="sum">3</span>
													</li>
													<li>
														<div class="rating-stars">
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star-o"></i>
														</div>
														<div class="rating-progress">
															<div style="width: 60%;"></div>
														</div>
														<span class="sum">2</span>
													</li>
													<li>
														<div class="rating-stars">
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
														</div>
														<div class="rating-progress">
															<div></div>
														</div>
														<span class="sum">0</span>
													</li>
													<li>
														<div class="rating-stars">
															<i class="fa fa-star"></i>
															<i class="fa fa-star"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
														</div>
														<div class="rating-progress">
															<div></div>
														</div>
														<span class="sum">0</span>
													</li>
													<li>
														<div class="rating-stars">
															<i class="fa fa-star"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
															<i class="fa fa-star-o"></i>
														</div>
														<div class="rating-progress">
															<div></div>
														</div>
														<span class="sum">0</span>
													</li>
												</ul>
											</div>
										</div>
										<!-- /Rating -->

										<!-- Reviews -->
										<div class="col-md-6">
											<div id="reviews">
												{% for review in product_reviews %}
												<ul class="reviews">
													<li>
														<div class="review-heading">
															<h5 class="name">{{ review.user.username }}</h5>
															<p class="date">{{ review.created_at }}</p>
															<div class="review-rating">
															{% for i in product_reviews|get_stars:review.rating %}
																<i class="fa fa-star{% if i == 0 %}-o empty{% endif %}"></i>
															{% endfor %}
															</div>
														</div>
														<div class="review-body">
															<p>{{ review.text }}</p>
														</div>
													</li>
												</ul>
												<ul class="reviews-pagination">
													<li class="active">1</li>
													<li><a href="#">2</a></li>
													<li><a href="#">3</a></li>
													<li><a href="#">4</a></li>
													<li><a href="#"><i class="fa fa-angle-right"></i></a></li>
												</ul>
												{% empty %}
													<p>No reviews found for this product.</p>
												{% endfor %}
											</div>
										</div>
										<!-- /Reviews -->

										<!-- Review Form -->
<!--										<div class="col-md-3">-->
<!--											<div id="review-form">-->
<!--												<form class="review-form">-->
<!--													<input class="input" type="text" placeholder="Your Name">-->
<!--													<input class="input" type="email" placeholder="Your Email">-->
<!--													<textarea class="input" placeholder="Your Review"></textarea>-->
<!--													<div class="input-rating">-->
<!--														<span>Your Rating: </span>-->
<!--														<div class="stars">-->
<!--															<input id="star5" name="rating" value="5" type="radio"><label for="star5"></label>-->
<!--															<input id="star4" name="rating" value="4" type="radio"><label for="star4"></label>-->
<!--															<input id="star3" name="rating" value="3" type="radio"><label for="star3"></label>-->
<!--															<input id="star2" name="rating" value="2" type="radio"><label for="star2"></label>-->
<!--															<input id="star1" name="rating" value="1" type="radio"><label for="star1"></label>-->
<!--														</div>-->
<!--													</div>-->
<!--													<button class="primary-btn">Submit</button>-->
<!--												</form>-->
<!--											</div>-->
<!--										</div>-->

										<!-- Review Form -->
										<div class="col-md-3">
											<div id="review-form">
												{% if has_purchased_product %}
												<form class="review-form" method="post" action="{% url 'submit_product_review' product.id %}">
													{% csrf_token %}
<!--													<input class="input" type="text" name="name" placeholder="Your Name">-->
<!--													<input class="input" type="email" name="email" placeholder="Your Email">-->
													<textarea class="input" name="review" placeholder="Your Review"></textarea>
													<div class="input-rating">
														<span>Your Rating: </span>
														<div class="stars">
															<input id="star5" name="rating" value="5" type="radio"><label for="star5"></label>
															<input id="star4" name="rating" value="4" type="radio"><label for="star4"></label>
															<input id="star3" name="rating" value="3" type="radio"><label for="star3"></label>
															<input id="star2" name="rating" value="2" type="radio"><label for="star2"></label>
															<input id="star1" name="rating" value="1" type="radio"><label for="star1"></label>
														</div>
													</div>
													<button class="primary-btn" type="submit">Submit</button>
												</form>
												{% else %}
												<p>You must purchase this product to leave a review.</p>
												{% endif %}
											</div>
										</div>
										<!-- /Review Form -->


										<!-- /Review Form -->
									</div>
								</div>
								<!-- /tab3  -->
							</div>
							<!-- /product tab content  -->
						</div>
					</div>
					<!-- /product tab -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->

		<!-- Section -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">

					<div class="col-md-12">
						<div class="section-title text-center">
							<h3 class="title">Related Products</h3>
						</div>
					</div>

					<!-- product -->
					<div class="col-md-3 col-xs-6">
						<div class="product">
							<div class="product-img">
								<img src="./img/product01.png" alt="">
								<div class="product-label">
									<span class="sale">-30%</span>
								</div>
							</div>
							<div class="product-body">
								<p class="product-category">Category</p>
								<h3 class="product-name"><a href="#">product name goes here</a></h3>
								<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
								<div class="product-rating">
								</div>
								<div class="product-btns">
									<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
									<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
									<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
								</div>
							</div>
							<div class="add-to-cart">
								<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
							</div>
						</div>
					</div>
					<!-- /product -->

					<!-- product -->
					<div class="col-md-3 col-xs-6">
						<div class="product">
							<div class="product-img">
								<img src="./img/product02.png" alt="">
								<div class="product-label">
									<span class="new">NEW</span>
								</div>
							</div>
							<div class="product-body">
								<p class="product-category">Category</p>
								<h3 class="product-name"><a href="#">product name goes here</a></h3>
								<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
								<div class="product-rating">
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
								</div>
								<div class="product-btns">
									<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
									<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
									<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
								</div>
							</div>
							<div class="add-to-cart">
								<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
							</div>
						</div>
					</div>
					<!-- /product -->

					<div class="clearfix visible-sm visible-xs"></div>

					<!-- product -->
					<div class="col-md-3 col-xs-6">
						<div class="product">
							<div class="product-img">
								<img src="./img/product03.png" alt="">
							</div>
							<div class="product-body">
								<p class="product-category">Category</p>
								<h3 class="product-name"><a href="#">product name goes here</a></h3>
								<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
								<div class="product-rating">
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
									<i class="fa fa-star-o"></i>
								</div>
								<div class="product-btns">
									<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
									<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
									<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
								</div>
							</div>
							<div class="add-to-cart">
								<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
							</div>
						</div>
					</div>
					<!-- /product -->

					<!-- product -->
					<div class="col-md-3 col-xs-6">
						<div class="product">
							<div class="product-img">
								<img src="./img/product04.png" alt="">
							</div>
							<div class="product-body">
								<p class="product-category">Category</p>
								<h3 class="product-name"><a href="#">product name goes here</a></h3>
								<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
								<div class="product-rating">
								</div>
								<div class="product-btns">
									<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
									<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
									<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
								</div>
							</div>
							<div class="add-to-cart">
								<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
							</div>
						</div>
					</div>
					<!-- /product -->

				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /Section -->


<script>
function changeMainImage(imageUrl) {
    const mainProductImg = document.getElementById("main-product-img");
    mainProductImg.src = imageUrl;
}


</script>



{% endblock main-content %}