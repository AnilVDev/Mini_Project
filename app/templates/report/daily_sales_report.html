{% extends 'app/admin-dashboard.html' %}
{% load static %}
{% block title %}User List{% endblock title %}



{% block admin %}
<div class="container mx-4 bg-white">
    <div class="btn-group" role="group" aria-label="Report Types">
        <a href="{% url 'daily_sales_report' %}" class="btn btn-primary">Daily</a>
        <a href="{% url 'monthly_sales_report' %}" class="btn btn-primary">Monthly</a>
        <a href="{% url 'yearly_sales_report' %}" class="btn btn-primary">Yearly</a>
    </div>
    <h1>Daily Sales Report</h1>

    <form method="post" class="bg-info px-4">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Generate Report</button>
    </form>
    <div class="text-white">
        <div class="row">
            <!-- Desktop and tablet chart -->
            <div class="col-lg-12 col-md-8 col-sm-12">
                <canvas id="myChart"></canvas>
            </div>
            <!-- Mobile chart (hidden on larger screens) -->
            <div class="col-12 d-md-none">
                <canvas id="myChart"></canvas>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!--<script>-->
<!--  const ctx = document.getElementById('myChart');-->

<!--  new Chart(ctx, {-->
<!--    type: 'bar',-->
<!--    data: {-->
<!--      labels: "{{day_number|safe}}",-->
<!--      datasets: [{-->
<!--        label: 'Orders by Daily',-->
<!--        data: {{total_order}},-->
<!--        borderWidth: 1-->
<!--      }]-->
<!--    },-->
<!--    options: {-->
<!--      scales: {-->
<!--        y: {-->
<!--          beginAtZero: true-->
<!--        }-->
<!--      }-->
<!--    }-->
<!--  });-->

<!--</script>-->



<script>
  const ctx = document.getElementById('myChart');
  const dayNumbers = {{ day_number|safe }};
  const totalOrders = {{ total_order|safe }};

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: dayNumbers.map(String),
      datasets: [{
        label: 'Orders by Day',
        data: totalOrders,
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        x: {
            title: {
            display: true,
            text: 'Day'
          },
          type: 'category', // Use category axis for custom labels
        },
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>


{% endblock admin %}